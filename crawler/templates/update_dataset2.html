{% extends 'main.html' %}
{% load static %}
{% block title %}new dataset{% endblock %}

{% block content %}
<script src="{% static 'js/script.js' %}"></script>
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- YouTube Player API -->


<h1>General settings</h1>
<hr>
<form method="post" action="{% url 'update' %}">
    {% csrf_token %}
    {{ form.as_p }}
    
    <input type="hidden" name="id" value="{{ form.instance.id }}">
    <div class="bss">
<button type="submit" name="update_dataset" id="update_dataset">Update the dataset</button>
 <button type="submit" id="download" name="download"> start downloading</button>
<button type="button" class="st" id="schedule" name="schedule" >schedule downloading</button>
</div>
<hr>
<h1>Video settings</h1>

    <table class="table table-bordered">
        <tr>
            <th>   </th>
            <th class='cur'>ID</th>
            <th class='cur'>Name</th>
            <th class='cur'>description</th>
            <th class='cur'>url</th>
            <th>actions</th>
          </tr>
          
          {% for item in videos %}
              <tr >
                <td><input type="checkbox"  name="selected_elements" value="{{ item.id }}"></td>
                  <td>{{ item.id }}</td>
                  <td >{{ item.title }}</td>
                  <td >{{item.description}}</td>
                  <td >{{ item.url }}</td>

                  <td>{% csrf_token %}
                    <input type="hidden" class="id_vid" name="id_vid" value="{{ item.id_vid }}">
                    <button type="button" class="preview-btn st" class="st" data-video-id="{{ item.id_vid }}">preview</button>
                  </td>
                
             
            </tr>
            {% endfor %}
    </table>
    
    <button type="submit" name="delete_video">delete</button>


<!-- Modal HTML code -->
<div id="preview-modal" class="modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          
          <iframe class="iframe" id="videoPreview" width="100%" height="500" src="" frameborder="0" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </div>
<!-- modal of schedule-->
<div id="schedule-modal" class="modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          
          <input type="time" name="time" id="time" placeholder="choose when you wnat to start downloading!">
          <button type="submit" name="wait">Done</button>
        </div>
      </div>
    </div>
  </div>
</form>
<script>
$(document).ready(function() {
  $('.preview-btn').click(function() {
    var videoId = $(this).data('video-id');
    var videoUrl = 'https://www.youtube.com/embed/' + videoId + '?autoplay=1';
    $('#videoPreview').attr('src', videoUrl);
    $('#preview-modal').modal('show');
  });
  
});
$(document).ready(function() {
  $('#schedule').click(function() {
    
    $('#schedule-modal').modal('show');
  });
  
});
</script>


 
{% endblock %}
    
    